#+title: æˆ‘çš„ Emacs é…ç½®æ–‡ä»¶
#+author: keke
#+email: librek@protonmail.com
#+date: <2021-04-27 Tue>
#+export_file_name: ~/Repos/keke-cute.github.io/emacs.html
#+options: creator:t author:t
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="me.css" /> <a href="index.html">Back To Home</a>
* åŒ…ç®¡ç†å™¨ä¸é…ç½®åŒ…(Straight.el & Leaf)
  #+begin_src emacs-lisp
    (defvar bootstrap-version)
    (let ((bootstrap-file
           (expand-file-name "straight/repos/straight.el/bootstrap.el" user-emacs-directory))
          (bootstrap-version 5))
      (unless (file-exists-p bootstrap-file)
        (with-current-buffer
            (url-retrieve-synchronously
             "https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"
             'silent 'inhibit-cookies)
          (goto-char (point-max))
          (eval-print-last-sexp)))
      (load bootstrap-file nil 'nomessage))
  #+end_src

  #+begin_src emacs-lisp
    (straight-use-package 'leaf)
    (straight-use-package 'leaf-keywords)
    (leaf-keywords-init)

    (straight-use-package 'magit)
    (straight-use-package 'htmlize)
  #+end_src

* å®å’Œåˆ«å
  Code from [[https://github.com/nasyxx/emacs.d/blob/master/literate-config/core/core-libs.org]]
  #+begin_src emacs-lisp
    ;;;###autoload
    (if (fboundp 'with-eval-after-load)
	(defalias 'after-x 'with-eval-after-load)
      (defmacro after-x (feature &rest body)
	"Eval BODY afetr FEATURE have loaded."
	(declare (indent defun))
	`(eval-after-load ,feature
	   '(progn ,@body))))

    (straight-use-package 'general)
    (leaf general
      :doc "More convenient key definitions in emacs."
      :url "https://github.com/noctuid/general.el"
      :require t
      :commands gsetq gsetq-local gsetq-default
      :init
      (defalias 'gsetq #'general-setq)
      (defalias 'gsetq-local #'general-setq-local)
      (defalias 'gsetq-default #'general-setq-default))
  #+end_src

* æ£€æµ‹ç³»ç»Ÿ
  #+begin_src emacs-lisp
    (defconst *is-a-mac* (eq system-type 'darwin))
    (defconst *is-a-linux* (eq system-type 'gnu/linux))

    (defun graphic-p ()
      (display-graphic-p))


    (when (file-directory-p "/run/current-system/profile/share/emacs/site-lisp")
      (add-to-list 'load-path "/run/current-system/profile/share/emacs/site-lisp/")
      (message "Hello, Guix System User")
      (leaf exwm-systemtray
        :commands
        exwm-systemtray--init
        exwm-systemtray--enable
        :hook
        (exwm-init-hook . exwm-systemtray--init)
        (exwm-exit-hook . exwm-systemtray--exit)))

    ;;(if (string= (system-name) "playground") ;; if
    ;;    (load-file "~/.emacs.d/etc/init-guix.el") ;; then
    ;;  (load-file "~/.emacs.d/etc/init-linux.el")) ;; else
  #+end_src

* ç•Œé¢

** ä¸»è¦çš„ä¸€äº›è®¾å®š
   #+begin_src emacs-lisp
     (setq inhibit-splash-screen t)
     (when (graphic-p)
       ;; default frame size
       ;;(setq initial-frame-alist
       ;;	'((width . 150)
       ;;	  (height . 56)))
       (setq org-startup-with-inline-images t)
       (global-hl-line-mode t)
       (scroll-bar-mode -1))
   #+end_src

** æŒ‡å®šæ¨¡å¼ç¦ç”¨è¡Œå·
   #+begin_src emacs-lisp
     ;; (defun my-inhibit-global-linum-mode ()
     ;;   "Counter-act `global-linum-mode'."
     ;;   (add-hook 'after-change-major-mode-hook
     ;;             (lambda () (linum-mode 0))
     ;;             :append :local))
     ;; 
     ;; (leaf my-inhibit-global-linum-mode
     ;;   :hook
     ;;   (eshell-mode-hook . my-inhibit-global-linum-mode)
     ;;   (term-mode-hook . my-inhibit-global-linum-mode)
     ;;   (vterm-mode-hook . my-inhibit-global-linum-mode)
     ;;   (telega-chat-mode-hook . my-inhibit-global-linum-mode)
     ;;   (telega-root-mode-hook . my-inhibit-global-linum-mode))
     ;; 
   #+end_src

** å­—ä½“è®¾å®š
   #+begin_src emacs-lisp
     (leaf nasy-font
       :doc "ä¸€äº›é»˜è¨’å€¤ã€‚"
       :custom
       ((*font-main-family*   . "OperatorMonoSSmLig Nerd Font")
        (*font-symbol-family* . "Symbola")
        (*font-cjk-family*    . "STFLGQKJF")
        (*font-cjk-2-family*  . "FZLiuGongQuanKaiShuJF")
        ;; I.Ngaan' font from `http://founder.acgvlyric.org/iu/doku.php/é€ å­—:é–‹æºå­—å‹_i.é¡é«”'.
        (*font-cjk-3-family*  . "I.Ngaan")
        (*font-cjk-4-family*  . "Kaiti SC")
        (*font-cjk-5-family*  . "Kaiti TC")
        ((*font-mode-line-family*
          ,*font-header-line-family*
          ,*font-tab-line-family*)
         . "Recursive Mono Casual Static"))

       (((*font-main-size*
          ,*font-mode-line-size*)
         . 14)
        (*font-symbol-size* . 17)
        ((*font-cjk-size*
          ,*font-cjk-2-size*
          ,*font-cjk-3-size*
          ,*font-cjk-4-size*
          ,*font-cjk-5-size*)
         . nil)
        ((*font-tab-line-size*
          ,*font-header-line-size*)
         . 12))

       ((*font-cjk-scale*
          ,*font-cjk-2-scale*
          ,*font-cjk-3-scale*
          ,*font-cjk-4-scale*
          ,*font-cjk-5-scale*)
        . 1.3)

       ((*font-main-weight*
         ,*font-symbol-weight*
         ,*font-cjk-weight*
         ,*font-cjk-2-weight*
         ,*font-cjk-3-weight*
         ;; *font-cjk-4-weight*
         ;; *font-cjk-5-weight*
         ,*font-mode-line-weight*
         ,*font-tab-line-weight*
         ,*font-header-line-weight*)
        . 'normal)

       ((*font-cjk-4-weight*
         ,*font-cjk-5-weight*) . 'bold))
   #+end_src

** è®¾å®šmacOSä¸Šçš„çª—å£æ ·å¼
   #+begin_src emacs-lisp
     (leaf mac-frame
       :when *is-a-mac*
       :config
       (defun stop-minimizing-window ()
         "Stop minimizing window under macOS."
         (interactive)
         (unless (and *is-a-mac*
                     window-system)
           (suspend-frame)))
       :custom
       (default-frame-alist
         . '((ns-transparent-titlebar . t)
             (ns-appearance           . light)
             (alpha                   . (80 . 75))
             (vertical-scroll-bars    . nil)
             (internal-border-width   . 24))))
   #+end_src

** ä¸»é¢˜è®¾å®š
   #+begin_src emacs-lisp
     (load-theme 'nasy t)
   #+end_src
** å·¥å…·æ è®¾å®š
   #+begin_src emacs-lisp
     (leaf tool-bar
       :tag "builtin"
       :bind
       (:tool-bar-map
	([copy]            . nil)
	([cut]             . nil)
	([dired]           . nil)
	([isearch-forward] . nil)
	([new-file]        . nil)
	([open-file]       . nil)
	([paste]           . nil)
	([save-buffer]     . nil)
	([undo]            . nil)
	([yank]            . nil)))
	;; ([dashboard-refresh-buffer]
	;;  . `(menu-item))))
   #+end_src

** ä¸€äº›å…³äºç•Œé¢çš„æ’ä»¶

*** å½©è™¹æ‹¬å·
    #+begin_src emacs-lisp
      (straight-use-package 'rainbow-delimiters)

      (leaf rainbow-delimiters
        :hook
        (prog-mode-hook . rainbow-delimiters-mode)
        :config
        ;; è®¾ç½®æ¯ä¸€çº§æ‹¬å·çš„é¢œè‰²
        (custom-set-faces
         '(rainbow-delimiters-base-face    ((t (:inherit nil :weight bold))))
         '(rainbow-delimiters-depth-1-face ((t (:inherit rainbow-delimiters-base-face :foreground "dark orange"))))
         '(rainbow-delimiters-depth-2-face ((t (:inherit rainbow-delimiters-base-face :foreground "gold"))))
         '(rainbow-delimiters-depth-3-face ((t (:inherit rainbow-delimiters-base-face :foreground "YellowGreen"))))
         '(rainbow-delimiters-depth-4-face ((t (:inherit rainbow-delimiters-base-face :foreground "LimeGreen"))))
         '(rainbow-delimiters-depth-5-face ((t (:inherit rainbow-delimiters-base-face :foreground "dodger blue"))))
         '(rainbow-delimiters-depth-6-face ((t (:inherit rainbow-delimiters-base-face :foreground "MediumSlateBlue"))))
         '(rainbow-delimiters-depth-7-face ((t (:inherit rainbow-delimiters-base-face :foreground "blue violet"))))
         '(rainbow-delimiters-depth-8-face ((t (:inherit rainbow-delimiters-base-face :foreground "hot pink"))))
         '(rainbow-delimiters-depth-9-face ((t (:inherit rainbow-delimiters-base-face :foreground "hot pink"))))))
    #+end_src

*** å½©è™¹çŒ«
    #+begin_src emacs-lisp
      (straight-use-package 'nyan-mode)
      (leaf nyan-mode
	:custom (nyan-animate-nyancat . t)
		(nyan-bar-length      . 16)
		(nyan-wavy-trail      . t)
	:hook after-init-hook)

    #+end_src

*** å¯¹é½çº¿
    #+begin_src emacs-lisp
      (when (graphic-p)
	(straight-use-package 'highlight-indent-guides)

	(leaf highlight-indent-guides
	  :hook (prog-mode-hook text-mode-hook org-mode-hook)
	  :config
	  (setq highlight-indent-guides-method 'bitmap)))
    #+end_src
*** Doom-modeline
    #+begin_src emacs-lisp
      (straight-use-package 'doom-modeline)
      (leaf doom-modeline
	:hook after-init-hook
	:defun doom-modeline-def-segment
	:custom
	((doom-modeline-height                      . 25)
	 (doom-modeline-bar-width                   . 5)
	 (doom-modeline-window-width-limit          . fill-column)
	 (doom-modeline-project-detection           . 'project)  ;; changed
	 (doom-modeline-buffer-file-name-style      . 'auto)
	 ((doom-modeline-icon                       ;; changed
	   doom-modeline-major-mode-icon
	   doom-modeline-major-mode-color-icon
	   doom-modeline-buffer-state-icon
	   doom-modeline-buffer-modification-icon
	   doom-modeline-unicode-fallback           ;; changed
	   doom-modeline-minor-modes                ;; changed
	   doom-modeline-enable-word-count)         ;; changed
	  . t)
	 (doom-modeline-continuous-word-count-modes . '(markdown-mode gfm-mode org-mode text-mode))
	 (doom-modeline-buffer-encoding             . nil)  ;; changed
	 (doom-modeline-indent-info                 . nil)
	 (doom-modeline-checker-simple-format       . nil)  ;; changed
	 (doom-modeline-number-limit                . 99)
	 (doom-modeline-vcs-max-length              . 12)
	 (doom-modeline-persp-name                  . nil)  ;; changed
	 (doom-modeline-display-default-persp-name  . nil)
	 (doom-modeline-lsp                         . t)
	 (doom-modeline-github                      . t)
	 `(doom-modeline-github-interval            . ,(* 30 60))
	 (doom-modeline-modal-icon                  . t)

	 ((doom-modeline-env-version
	   doom-modeline-env-enable-python
	   doom-modeline-env-enable-ruby
	   doom-modeline-env-enable-perl
	   doom-modeline-env-enable-go
	   doom-modeline-env-enable-elixir
	   doom-modeline-env-enable-rust)
	  . t)

	 (doom-modeline-env-python-executable . "python")
	 (doom-modeline-env-ruby-executable   . "ruby")
	 (doom-modeline-env-perl-executable   . "perl")
	 (doom-modeline-env-go-executable     . "go")
	 (doom-modeline-env-elixir-executable . "iex")
	 (doom-modeline-env-rust-executable   . "rustc")

	 (doom-modeline-env-load-string . "...")

	 (doom-modeline-mu4e        . t)
	 (doom-modeline-irc         . t)
	 (doom-modeline-irc-stylize . 'identity)))
    #+end_src

*** Doom-Themes
    #+begin_src emacs-lisp
      (straight-use-package 'doom-themes)

      (leaf doom-themes
	:custom
	((doom-dracula-brighter-comments
	  doom-dracula-colorful-headers
	  doom-dracula-comment-bg) . t)
	(doom-themes-treemacs-theme . "doom-colors")
	:config
	(after-x 'treemacs
	  (doom-themes-treemacs-config))
	(doom-themes-visual-bell-config)
	(after-x 'org-mode
	  (doom-themes-org-config)))
    #+end_src    

*** Dashboard
    #+begin_src emacs-lisp
      (straight-use-package 'dashboard)

      (leaf page-break-lines
	:doc "Emacs: display ugly ^L page breaks as tidy horizontal lines"
	:url "https://github.com/purcell/page-break-lines"
	:tag "convenience" "faces"
	:hook
	(after-init-hook . global-page-break-lines-mode)
	(nasy/font-change-hook
	 . (lambda ()
	     (progn
	       (nasy/change-char-width page-break-lines-char 2)
	       (nasy/set-symbol ?âŠ¸ 18 nil))))
	:custom
	(page-break-lines-char . ?âŠ¸))

      (leaf dashboard
	:commands dashboard-setup-startup-hook
	:preface
	(defun nasy/wfw1 (&rest _)
	  "Widget forward 1."
	  (interactive)
	  (widget-forward 1))
	(defun nasy/fw2 (&rest _)
	  "Forward 2 chars."
	  (interactive "p")
	  (forward-char 2))
	(defun nasy/-recentf (&rest _)
	  (interactive)
	  (counsel-recentf))
	(defun nasy/-bookmarks (&rest _)
	  (interactive)
	  (bookmark-jump))
	(defun nasy/-projects (&rest _)
	  (interactive)
	  (counsel-projectile-switch-project))
	(defun nasy/-dashboard-items (list-size)
	  (insert "\n")
	  (insert "ğŸŒ“ ")
	  (widget-create 'item
			 :tag "Recent Files (r)"
			 :action #'nasy/-recentf
			 :mouse-face 'highlight
			 :button-face 'dashboard-heading
			 :button-prefix ""
			 :button-suffix ""
			 :format "%[%t%]")
	  (insert "\n\n")
	  (insert "ğŸ“š")
	  (insert " ")
	  (widget-create 'item
			 :tag "Bookmarks (b)"
			 :action #'nasy/-bookmarks
			 :mouse-face 'highlight
			 :button-face 'dashboard-heading
			 :button-prefix ""
			 :button-suffix ""
			 :format "%[%t%]")
	  (insert "\n\n")
	  (insert "ğŸš€ ")
	  (widget-create 'item
			 :tag "Projects (p)"
			 :action #'nasy/-projects
			 :mouse-face 'highlight
			 :button-face 'dashboard-heading
			 :button-prefix ""
			 :button-suffix ""
			 :format "%[%t%]")
	  (insert "\n"))
	:bind
	("<f5>" . dashboard-refresh-buffer)
	(:dashboard-mode-map
	 ("r"              . counsel-recentf)
	 ("p"              . counsel-projectile-switch-project)
	 ("b"              . counsel-bookmark)
	 ("g"              . dashboard-refresh-buffer)
	 ("<down-mouse-1>" . nil)
	 ("H-p"            . dashboard-previous-line)
	 ("H-n"            . dashboard-next-line)
	 ("H-b"            . widget-backward)
	 ("H-f"            . widget-forward)
	 ("<mouse-1>"      . widget-button-click)
	 ("<mouse-2>"      . widget-button-click)
	 ("<up>"           . widget-backward)
	 ("<down>"         . nasy/wfw1))
	:hook ((dashboard-mode-hook . (lambda () (gsetq-local tab-width 1)))
	       (after-init-hook     . dashboard-setup-startup-hook))
	:custom
	(dashboard-org-agenda-categories . '("Calendar" "Tasks" "Appointments"))
	`(dashboard-startup-banner       . ,(expand-file-name "n_icon.png" user-emacs-directory))
	(dashboard-items . '((n-items . t)))
			     ;; (bookmarks . t)))
			     ;; (registers . 5)
			     ;; (agenda    . 5)
			     ;; (projects  . 7)))
	(dashboard-item-generators . '((n-items   . nasy/-dashboard-items)))
	((dashboard-center-content
	  dashboard-show-shortcuts
	  dashboard-set-heading-icons
	  dashboard-set-file-icons
	  dashboard-set-init-info
	  show-week-agenda-p
	  dashboard-set-navigator) . t)
	:config
	:init
	(after-x 'all-the-icons
	  (setq dashboard-navigator-buttons
		`(;; line1
		  ((,(all-the-icons-octicon "mark-github" :height 1.1 :v-adjust 0.0)
		    "Source"
		    "Source Page"
		    (lambda (&rest _) (browse-url "https://github.com/keke-cute/.emacs.d")))
		   (,(all-the-icons-octicon "gear" :height 1.1 :v-adjust 0.0)
		    "Config"
		    "Config File"
		    (lambda (&rest _)
		      (let ((upath (expand-file-name "custom/user-config.el" user-emacs-directory))
			    (epath (expand-file-name "custom/user-config-example.el" user-emacs-directory)))
			(when (and (file-exists-p epath)
				  (not (file-exists-p upath)))
			  (copy-file epath upath))
			(find-file upath))))
		   (,(all-the-icons-octicon "book" :height 1.1 :v-adjust 0.0)
		    "Document"
		    "Document Page"
		    (lambda (&rest _) (browse-url "https://keke-cute.github.io/emacs.html"))))))))
	;; :advice)
	;; (:after dashboard-next-line     nasy/fw2)
	;; (:after widget-forward          nasy/fw2)
	;; (:after widget-backward         nasy/fw2))

      (setq-default
       initial-scratch-message     (concat ";; Happy hacking, " user-login-name " - Emacs â™¥ you!\n\n")
       dashboard-banner-logo-title (concat ";; Happy hacking, " user-login-name " - Emacs â™¥ you!\n\n")
       ;; initial-buffer-choice       #'(lambda () (get-buffer "*dashboard*"))  ;; It will cause error if you start emacs from Command line with file name
										;; https://github.com/rakanalh/emacs-dashboard/issues/69
      )
    #+end_src

*** Minions
    #+begin_src emacs-lisp
      (straight-use-package 'minions)
      (leaf minions
	:hook after-init-hook
	:custom (minions-mode-line-lighter . "âœ¬"))
    #+end_src

* ç¼–è¾‘å™¨
  #+begin_src emacs-lisp
    ;; è‡ªåŠ¨åŠ è½½å¤–éƒ¨ä¿®æ”¹è¿‡çš„æ–‡ä»¶
    (global-auto-revert-mode 1)
    ;; å…³é—­è‡ªå·±ç”Ÿäº§çš„ä¿å­˜æ–‡ä»¶
    (setq auto-save-default nil)
    ;; å…³é—­è‡ªå·±ç”Ÿäº§çš„å¤‡ä»½æ–‡ä»¶
    (setq make-backup-files nil)
    ;; é€‰ä¸­æŸä¸ªåŒºåŸŸç»§ç»­ç¼–è¾‘å¯ä»¥æ›¿æ¢æ‰è¯¥åŒºåŸŸ
    (delete-selection-mode 1)
    ;; è®¾ç½®h æ–‡ä»¶é»˜è®¤ä¸ºc++æ–‡ä»¶
    (add-to-list 'auto-mode-alist '("\\.h\\'" . c++-mode))
    ;; orgmode
    (add-hook 'org-mode-hook (lambda () (setq truncate-lines nil)))
    ;; without lock files
    (setq create-lockfiles nil)
    ;; y-or-n
    (fset 'yes-or-no-p 'y-or-n-p)
  #+end_src

* åŒ…

** Ivy
   #+begin_src emacs-lisp
     (straight-use-package 'ivy)
     (straight-use-package 'swiper)
     (straight-use-package 'counsel)
     (straight-use-package 'counsel-projectile)
     (straight-use-package 'ivy-posframe)
     (straight-use-package 'all-the-icons-ivy-rich)

     (leaf ivy
       :doc "Incremental Vertical completYon"
       :req "emacs-24.5"
       :tag "matching" "emacs>=24.5"
       :url "https://github.com/abo-abo/swiper"
       :emacs>= 24.5
       :leaf-defer nil
       :custom ((ivy-initial-inputs-alist . nil)
		(ivy-use-selectable-prompt . t))
       :global-minor-mode t
       :config
       (leaf swiper
	 :doc "Isearch with an overview. Oh, man!"
	 :req "emacs-24.5" "ivy-0.13.0"
	 :tag "matching" "emacs>=24.5"
	 :url "https://github.com/abo-abo/swiper"
	 :emacs>= 24.5
	 :bind (("C-s" . swiper)))

       (leaf counsel
	 :doc "Various completion functions using Ivy"
	 :req "emacs-24.5" "swiper-0.13.0"
	 :tag "tools" "matching" "convenience" "emacs>=24.5"
	 :url "https://github.com/abo-abo/swiper"
	 :emacs>= 24.5
	 :bind (("C-S-s" . counsel-imenu)
		("C-x C-r" . counsel-recentf))
	 :custom `((counsel-yank-pop-separator . "\n----------\n")
		   (counsel-find-file-ignore-regexp . ,(rx-to-string '(or "./" "../") 'no-group)))
	 :global-minor-mode t))

     (leaf ivy-posframe
       :hook (ivy-mode-hook)
       :mode-hook
       (setq ivy-auto-shrink-minibuffer-alist nil)
       :global-minor-mode t)

     (leaf all-the-icons-ivy-rich
       :global-minor-mode t)

     (leaf ivy-rich
       :global-minor-mode t)
   #+end_src

** Selectrum
   #+begin_src emacs-lisp
     ;; (straight-use-package 'selectrum)
     ;; 
     ;; (leaf selectrum
     ;;   :config
     ;;   (selectrum-mode +1))
   #+end_src
** Projectile
   #+begin_src emacs-lisp
     (straight-use-package 'projectile)

     (leaf projectile
       :config
       (projectile-mode +1)
       :bind-keymap
       ("s-p" . projectile-command-map))
   #+end_src
** Company
   #+begin_src emacs-lisp
     (straight-use-package 'company)

     (leaf company
       :hook
       (after-init-hook . global-company-mode)
       :init
       (setq company-tooltip-align-annotations t company-idle-delay 0.1 company-echo-delay 0
             company-minimum-prefix-length 2 company-require-match nil company-dabbrev-ignore-case
             nil company-dabbrev-downcase nil company-show-numbers t)
       :bind
       ((:company-active-map
         ("M-n" . nil)
         ("M-p" . nil)
         ("C-n" . company-select-next)
         ("C-p" . company-select-previous))))
   #+end_src

** Lsp-mode
   #+begin_src emacs-lisp
     (straight-use-package 'lsp-mode)

     (leaf lsp-mode
       :commands lsp)
   #+end_src

** Flycheck
   #+begin_src emacs-lisp
     (straight-use-package 'flycheck)

     (leaf flycheck
       :init
       (global-flycheck-mode))
   #+end_src

** Which-key
   #+begin_src emacs-lisp
     (straight-use-package 'which-key)

     (leaf which-key
       :doc "Emacs package that displays available keybindings in popup."
       :url "https://github.com/justbur/emacs-which-key"
       :tag "help"
       :custom (which-key-allow-imprecise-window-fit . nil)
       :hook 'after-init-hook)
   #+end_src
** Org-babel
   #+begin_src emacs-lisp
   (custom-set-variables
      '(org-babel-load-languages (quote ((emacs-lisp . t) (haskell . t))))
      '(org-confirm-babel-evaluate nil))
   #+end_src

** Telega
   #+begin_src emacs-lisp
     (straight-use-package 'telega)
   #+end_src

** Emacs-Rime
   #+begin_src emacs-lisp
     (straight-use-package 'rime)

     (leaf rime
       :doc "RIME ã„“ in Emacs"
       :url "https://github.com/DogLooksGood/emacs-rime"
       :tag "convenience" "input-method"
       :bind
       (:rime-mode-map
	("C-`"   . rime-send-keybinding)
	("C-S-`" . rime-send-keybinding)
	("C-,"   . rime-send-keybinding))
       (:rime-active-mode-map
	("C-;"   . rime-send-keybinding)
	("C-SPC" . rime-send-keybinding))
       :custom
       `(rime-emacs-module-header-root    . ,(expand-file-name "/opt/local/include"))
       `(rime-user-data-dir   . ,(expand-file-name "~/.config/rime"))
       `(rime-librime-root    . ,(expand-file-name "/opt/local"))
       (rime-candidate-labels .'("ã€¡" "ã€¢" "ã€£" "ã€¤" "ã€¥" "ã€¦" "ã€§" "ã€¨" "ã€©"))
       (default-input-method  . "rime")
       (rime-cursor           . "Ë°")
       (rime-show-candidate   . 'posframe)
       (rime-posframe-style   . 'vertical)
       (rime-show-preedit     . t)
       (rime-translate-keybindings
	. '("C-f"
	    "C-b"
	    "C-n"
	    "C-p"
	    "C-g"
	    "C-`"
	    "C-;"
	    "C-SPC"
	    "<left>"
	    "<right>"
	    "<up>"
	    "<down>"
	    "<prior>"
	    "<next>"
	    "<delete>")))
   #+end_src
** Exec-path-from-shell
   #+begin_src emacs-lisp
     (straight-use-package 'exec-path-from-shell)
     (exec-path-from-shell-initialize)
   #+end_src

** Org-mode
   #+begin_src emacs-lisp
     (leaf org
       :custom
       (org-ellipsis . " ï¹…")
       (org-startup-folded    . 'content))
   #+end_src

** Org-static-blog
   #+begin_src emacs-lisp
     (straight-use-package 'org-static-blog)

     (setq org-static-blog-publish-title "Ethereal Horizon")
     (setq org-static-blog-publish-url "https://keke-cute.github.io/")
     (setq org-static-blog-publish-directory "~/Repos/keke-cute.github.io")
     (setq org-static-blog-posts-directory "~/Repos/keke-cute.github.io/posts")
     (setq org-static-blog-drafts-directory "~/Repos/keke-cute.github.io/drafts")
     (setq org-static-blog-enable-tags t)
     (setq org-export-with-toc nil)
     (setq org-export-with-section-numbers nil)

     ;; This header is inserted into the <head> section of every page:
     ;;   (you will need to create the style sheet at
     ;;    ~/projects/blog/static/style.css
     ;;    and the favicon at
     ;;    ~/projects/blog/static/favicon.ico)
     (setq org-static-blog-page-header
     "<meta name=\"author\" content=\"keke\">
     <meta name=\"referrer\" content=\"no-referrer\">
     <link href= \"static/style.css\" rel=\"stylesheet\" type=\"text/css\" />
     <link rel=\"icon\" href=\"static/favicon.ico\">")

     ;; This preamble is inserted at the beginning of the <body> of every page:
     ;;   This particular HTML creates a <div> with a simple linked headline
     (setq org-static-blog-page-preamble
     "<div class=\"header\">
       <a href=\"https://keke-cute.github.io\">Ethereal Horizon</a> <A href=\"https://keke-cute.github.io/emacs.html\">Emacs Configure</a>
     </div>")

     ;; This postamble is inserted at the end of the <body> of every page:
     ;;   This particular HTML creates a <div> with a link to the archive page
     ;;   and a licensing stub.
     (setq org-static-blog-page-postamble
     "<div id=\"archive\">
       <a href=\"https://keke-cute.github.io/archive.html\">Other posts</a>
     </div>
     <center><a rel=\"license\" href=\"https://creativecommons.org/licenses/by-sa/3.0/\"><img alt=\"Creative Commons License\" style=\"border-width:0\" src=\"https://i.creativecommons.org/l/by-sa/3.0/88x31.png\" /></a><br /><span xmlns:dct=\"https://purl.org/dc/terms/\" href=\"https://purl.org/dc/dcmitype/Text\" property=\"dct:title\" rel=\"dct:type\">Ethereal Horizon</span> by <a xmlns:cc=\"https://creativecommons.org/ns#\" href=\"https://github.com/keke-cute\" property=\"cc:attributionName\" rel=\"cc:attributionURL\">ä¸å¯è§†ç•Œçº¿</a> is licensed under a <a rel=\"license\" href=\"https://creativecommons.org/licenses/by-sa/3.0/\">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</center>")

     ;; This HTML code is inserted into the index page between the preamble and
     ;;   the blog posts
     (setq org-static-blog-index-front-matter
     "<h1> Ethereal Horizon </h1>\n")
   #+end_src

** Org-superstar-mode
   #+begin_src emacs-lisp
     (straight-use-package 'org-superstar)

     (leaf org-superstar
       :hook
       (org-mode-hook)
       (nasy/font-change-hook
	. (lambda ()
	    (progn
	      (nasy/set-symbol ?â˜¯ 21 nil)
	      (nasy/set-symbol ?âœ¿ 18 nil)
	      (nasy/set-symbol ?â€ 16 nil)
	      (nasy/set-symbol ?âœ« 15 nil)
	      (nasy/set-symbol ?âœ¸ 16 nil)
	      (nasy/set-symbol ?â—‰ 16 nil)
	      (nasy/set-symbol ?âœ¼ 12 nil)
	      (nasy/set-symbol ?âœš 12 nil)
	      (nasy/set-symbol ?â 13 nil)
	      (nasy/change-char-width ?â˜¯ 2)
	      (nasy/change-char-width ?âœ¿ 2)
	      (nasy/change-char-width ?â€ 2)
	      (nasy/change-char-width ?âœ« 2)
	      (nasy/change-char-width ?âœ¸ 2)
	      (nasy/change-char-width ?â—‰ 2)
	      (nasy/change-char-width ?âœ¼ 1)
	      (nasy/change-char-width ?âœš 1)
	      (nasy/change-char-width ?â 1))))
       :custom
       ((org-superstar-special-todo-items . t)
	(org-superstar-headline-bullets-list
	 . '("â˜¯"
	     "âœ¿"
	     "â€"
	     "âœ«"
	     "âœ¸"
	     "â—‰"))
	(org-superstar-item-bullet-alist
	 . '((?* . ?âœ¼)
	     (?+ . ?âœš)
	     (?- . ?â)))))
   #+end_src

* ç¼–ç¨‹è¯­è¨€

** Haskell
   #+begin_src emacs-lisp
     (straight-use-package 'haskell-mode)

     (leaf haskell-mode
       :require t)

     (leaf inf-haskell
       :require t)
   #+end_src

** Golang
   #+begin_src emacs-lisp
     (straight-use-package 'go-mode)

     (leaf go-mode
       :hook
       (go-mode-hook . lsp))
   #+end_src
